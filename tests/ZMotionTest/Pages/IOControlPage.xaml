<Page
    x:Class="ZMotionTest.Pages.IOControlPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:ZMotionTest.Converters"
    xmlns:customControl="clr-namespace:WPFProject.ShareControls;assembly=WPFProject.ShareControls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:viewmodels="clr-namespace:ZMotionTest.ViewModels"
    Title="IO控制测试"
    d:DataContext="{d:DesignInstance Type=viewmodels:IOControlViewModel}"
    d:DesignHeight="900"
    d:DesignWidth="1400"
    mc:Ignorable="d">

    <Page.Resources>
        <sys:Boolean x:Key="True">True</sys:Boolean>
        <sys:Boolean x:Key="False">False</sys:Boolean>
        <!--  转换器  -->
        <converters:BoolToStringConverter x:Key="BoolToStringConverter" />

        <!--  位状态指示器样式  -->
        <Style x:Key="BitIndicatorStyle" TargetType="Border">
            <Setter Property="Width" Value="24" />
            <Setter Property="Height" Value="24" />
            <Setter Property="Margin" Value="1" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="Gray" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsActive}" Value="True">
                    <Setter Property="Background" Value="#4CAF50" />
                    <Setter Property="BorderBrush" Value="#388E3C" />
                </DataTrigger>
                <DataTrigger Binding="{Binding IsActive}" Value="False">
                    <Setter Property="Background" Value="#F5F5F5" />
                    <Setter Property="BorderBrush" Value="#BDBDBD" />
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <!--  状态面板样式  -->
        <Style x:Key="StatusPanelStyle" TargetType="Border">
            <Setter Property="Background" Value="#E3F2FD" />
            <Setter Property="BorderBrush" Value="#2196F3" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="4" />
            <Setter Property="Padding" Value="8" />
            <Setter Property="Margin" Value="0,0,0,8" />
        </Style>
    </Page.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="16">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="16" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!--  主要测试区域  -->
            <TabControl Grid.Row="2" materialDesign:ColorZoneAssist.Mode="PrimaryMid">

                <!--  单个IO测试  -->
                <TabItem Header="单个IO">
                    <Grid Margin="16">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="24" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!--  数字输入  -->
                        <materialDesign:Card Grid.Column="0" Padding="16">
                            <StackPanel>
                                <TextBlock
                                    Margin="0,0,0,12"
                                    Style="{DynamicResource MaterialDesignHeadline6TextBlock}"
                                    Text="数字输入(DI)" />

                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="8" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <TextBox
                                        Grid.Column="0"
                                        materialDesign:HintAssist.Hint="DI数量"
                                        Style="{DynamicResource MaterialDesignFloatingHintTextBox}"
                                        Text="{Binding DICount, UpdateSourceTrigger=PropertyChanged}" />

                                    <Button
                                        Grid.Column="2"
                                        materialDesign:ButtonAssist.CornerRadius="4"
                                        Command="{Binding RefreshDICommand}"
                                        Content="刷新"
                                        Style="{DynamicResource MaterialDesignRaisedButton}" />
                                </Grid>

                                <DataGrid
                                    Height="400"
                                    materialDesign:DataGridAssist.CellPadding="8"
                                    materialDesign:DataGridAssist.ColumnHeaderPadding="8"
                                    AutoGenerateColumns="False"
                                    CanUserAddRows="False"
                                    CanUserDeleteRows="False"
                                    IsReadOnly="True"
                                    ItemsSource="{Binding DIList}">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn
                                            Width="60"
                                            Binding="{Binding Index}"
                                            Header="索引" />
                                        <DataGridTemplateColumn Width="60" Header="状态">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <Border Style="{StaticResource BitIndicatorStyle}">
                                                        <TextBlock
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            FontSize="10"
                                                            FontWeight="Bold"
                                                            Text="{Binding IsActive, Converter={StaticResource BoolToStringConverter}}" />
                                                    </Border>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                        <DataGridTextColumn
                                            Width="*"
                                            Binding="{Binding Description}"
                                            Header="描述" />
                                    </DataGrid.Columns>
                                </DataGrid>
                            </StackPanel>
                        </materialDesign:Card>

                        <!--  数字输出  -->
                        <materialDesign:Card Grid.Column="2" Padding="16">
                            <StackPanel>
                                <TextBlock
                                    Margin="0,0,0,12"
                                    Style="{DynamicResource MaterialDesignHeadline6TextBlock}"
                                    Text="数字输出(DO)" />

                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="8" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <TextBox
                                        Grid.Column="0"
                                        materialDesign:HintAssist.Hint="DO数量"
                                        Style="{DynamicResource MaterialDesignFloatingHintTextBox}"
                                        Text="{Binding DOCount, UpdateSourceTrigger=PropertyChanged}" />

                                    <Button
                                        Grid.Column="2"
                                        materialDesign:ButtonAssist.CornerRadius="4"
                                        Command="{Binding RefreshDOCommand}"
                                        Content="刷新"
                                        Style="{DynamicResource MaterialDesignRaisedButton}" />
                                </Grid>

                                <DataGrid
                                    Height="400"
                                    materialDesign:DataGridAssist.CellPadding="8"
                                    materialDesign:DataGridAssist.ColumnHeaderPadding="8"
                                    AutoGenerateColumns="False"
                                    CanUserAddRows="False"
                                    CanUserDeleteRows="False"
                                    ItemsSource="{Binding DOList}">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn
                                            Width="60"
                                            Binding="{Binding Index}"
                                            Header="索引" />
                                        <DataGridTemplateColumn Width="60" Header="状态">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <CheckBox HorizontalAlignment="Center" IsChecked="{Binding IsActive, UpdateSourceTrigger=PropertyChanged}" />
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                        <DataGridTextColumn
                                            Width="*"
                                            Binding="{Binding Description}"
                                            Header="描述" />
                                    </DataGrid.Columns>
                                </DataGrid>
                            </StackPanel>
                        </materialDesign:Card>
                    </Grid>
                </TabItem>


                <!--  单个IO测试  -->
                <TabItem Header="IO协议测试">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <materialDesign:Card
                            Grid.Row="0"
                            Grid.Column="0"
                            Grid.ColumnSpan="2"
                            Padding="16">
                            <UniformGrid Columns="6">
                                <UniformGrid.Resources>
                                    <Style BasedOn="{StaticResource MaterialDesignRaisedButton}" TargetType="Button">
                                        <Setter Property="Margin" Value="5" />
                                    </Style>
                                </UniformGrid.Resources>
                                <Button Command="{Binding ReadCompleteProtocolsCommand}" Content="读取协议" />
                                <Button Command="{Binding WriteCompleteProtocolCommand}" Content="写入协议" />
                                <Button Command="{Binding TestExpressionReadCommand}" Content="表达式读取" />
                                <Button Command="{Binding TestExpressionWriteCommand}" Content="表达式写入" />
                                <Button Command="{Binding CreateWriteMappingCommand}" Content="创建写入映射" />
                                <Button Command="{Binding TestAddressReadWriteCommand}" Content="测试地址读写" />
                            </UniformGrid>
                        </materialDesign:Card>

                        <ScrollViewer
                            Grid.Row="1"
                            Grid.Column="1"
                            VerticalAlignment="Top">
                            <ItemsControl ItemsSource="{Binding WriteDataStatuses}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <UniformGrid Columns="2" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <customControl:DataStatusControl Height="60" />
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>

                        <ScrollViewer
                            Grid.Row="1"
                            Grid.Column="0"
                            VerticalAlignment="Top">
                            <ItemsControl ItemsSource="{Binding ReadDataStatuses}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <UniformGrid Columns="2" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <customControl:DataStatusControl Height="60" />
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </TabItem>

                <!--  多个IO测试  -->
                <TabItem Header="多个IO">
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="16" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="16" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="16" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <!--  控制面板  -->
                        <materialDesign:Card Grid.Row="0" Padding="16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="16" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="16" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="8" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <TextBox
                                    Grid.Column="0"
                                    materialDesign:HintAssist.Hint="起始索引"
                                    Style="{DynamicResource MaterialDesignFloatingHintTextBox}"
                                    Text="{Binding MultiStartIndex, UpdateSourceTrigger=PropertyChanged}" />

                                <TextBox
                                    Grid.Column="2"
                                    materialDesign:HintAssist.Hint="结束索引"
                                    Style="{DynamicResource MaterialDesignFloatingHintTextBox}"
                                    Text="{Binding MultiEndIndex, UpdateSourceTrigger=PropertyChanged}" />

                                <Button
                                    Grid.Column="4"
                                    materialDesign:ButtonAssist.CornerRadius="4"
                                    Command="{Binding GetMultiDICommand}"
                                    Content="读取DI"
                                    Style="{DynamicResource MaterialDesignRaisedButton}" />

                                <Button
                                    Grid.Column="6"
                                    materialDesign:ButtonAssist.CornerRadius="4"
                                    Command="{Binding GetMultiDOCommand}"
                                    Content="读取DO"
                                    Style="{DynamicResource MaterialDesignOutlinedButton}" />
                            </Grid>
                        </materialDesign:Card>

                        <!--  批量DO设置按钮组  -->
                        <materialDesign:Card Grid.Row="4" Padding="16">
                            <StackPanel>
                                <TextBlock
                                    Margin="0,0,0,12"
                                    Style="{DynamicResource MaterialDesignSubtitle1TextBlock}"
                                    Text="批量DO设置" />

                                <!--  快速操作按钮组  -->
                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="8" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="8" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="8" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="8" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="24" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>

                                    <Button
                                        Grid.Column="0"
                                        materialDesign:ButtonAssist.CornerRadius="4"
                                        Background="#4CAF50"
                                        Command="{Binding SetAllMultiDOCommand}"
                                        Content="全部置1"
                                        Foreground="White"
                                        Style="{DynamicResource MaterialDesignOutlinedButton}" />

                                    <Button
                                        Grid.Column="2"
                                        materialDesign:ButtonAssist.CornerRadius="4"
                                        Background="#F44336"
                                        Command="{Binding ClearAllMultiDOCommand}"
                                        Content="全部清0"
                                        Foreground="White"
                                        Style="{DynamicResource MaterialDesignOutlinedButton}" />

                                    <Button
                                        Grid.Column="4"
                                        materialDesign:ButtonAssist.CornerRadius="4"
                                        Background="#FF9800"
                                        Command="{Binding InvertAllMultiDOCommand}"
                                        Content="全部翻转"
                                        Foreground="White"
                                        Style="{DynamicResource MaterialDesignOutlinedButton}" />

                                    <Button
                                        Grid.Column="6"
                                        materialDesign:ButtonAssist.CornerRadius="4"
                                        Background="#9C27B0"
                                        Command="{Binding SetOddMultiDOCommand}"
                                        Content="奇数置1"
                                        Foreground="White"
                                        Style="{DynamicResource MaterialDesignOutlinedButton}" />

                                    <Button
                                        Grid.Column="8"
                                        materialDesign:ButtonAssist.CornerRadius="4"
                                        Background="#3F51B5"
                                        Command="{Binding SetEvenMultiDOCommand}"
                                        Content="偶数置1"
                                        Foreground="White"
                                        Style="{DynamicResource MaterialDesignOutlinedButton}" />

                                    <Button
                                        Grid.Column="10"
                                        materialDesign:ButtonAssist.CornerRadius="4"
                                        Background="#2196F3"
                                        Command="{Binding ApplyMultiDOFromBitsCommand}"
                                        Content="应用到硬件"
                                        FontWeight="Bold"
                                        Foreground="White"
                                        Style="{DynamicResource MaterialDesignRaisedButton}" />
                                </Grid>
                            </StackPanel>
                        </materialDesign:Card>

                        <!--  位状态显示  -->
                        <Grid Grid.Row="6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="16" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <!--  DI位状态  -->
                            <materialDesign:Card Grid.Column="0" Padding="16">
                                <StackPanel>
                                    <TextBlock
                                        Margin="0,0,0,8"
                                        Style="{DynamicResource MaterialDesignSubtitle1TextBlock}"
                                        Text="数字输入位状态" />
                                    <ScrollViewer MaxHeight="300" VerticalScrollBarVisibility="Auto">
                                        <ItemsControl ItemsSource="{Binding MultiDIBits}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <WrapPanel Orientation="Horizontal" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Style="{StaticResource BitIndicatorStyle}" ToolTip="{Binding DisplayText}">
                                                        <TextBlock
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            FontSize="8"
                                                            FontWeight="Bold"
                                                            Text="{Binding Index}" />
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </ScrollViewer>
                                </StackPanel>
                            </materialDesign:Card>

                            <!--  DO位状态 (可编辑)  -->
                            <materialDesign:Card Grid.Column="2" Padding="16">
                                <StackPanel>
                                    <TextBlock
                                        Margin="0,0,0,8"
                                        Style="{DynamicResource MaterialDesignSubtitle1TextBlock}"
                                        Text="数字输出位状态 (点击切换)" />
                                    <ScrollViewer MaxHeight="300" VerticalScrollBarVisibility="Auto">
                                        <ItemsControl ItemsSource="{Binding MultiDOBits}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <WrapPanel Orientation="Horizontal" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border
                                                        Cursor="Hand"
                                                        Style="{StaticResource BitIndicatorStyle}"
                                                        ToolTip="{Binding DisplayText}">
                                                        <Border.InputBindings>
                                                            <MouseBinding
                                                                Command="{Binding DataContext.ToggleDOBitCommand, RelativeSource={RelativeSource AncestorType=Page}}"
                                                                CommandParameter="{Binding}"
                                                                MouseAction="LeftClick" />
                                                        </Border.InputBindings>
                                                        <TextBlock
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            FontSize="8"
                                                            FontWeight="Bold"
                                                            Text="{Binding Index}" />
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </ScrollViewer>
                                </StackPanel>
                            </materialDesign:Card>
                        </Grid>
                    </Grid>
                </TabItem>

                <!--  DIDO反转配置  -->
                <TabItem Header="反转配置">
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="16" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <!--  控制按钮  -->
                        <materialDesign:Card Grid.Row="0" Padding="16">
                            <StackPanel>
                                <TextBlock
                                    Margin="0,0,0,16"
                                    Style="{DynamicResource MaterialDesignHeadline6TextBlock}"
                                    Text="DIDO反转配置" />
                                <Button
                                    HorizontalAlignment="Left"
                                    materialDesign:ButtonAssist.CornerRadius="4"
                                    Background="{DynamicResource PrimaryHueMidBrush}"
                                    Command="{Binding ApplyDIDOInverterCommand}"
                                    Content="应用配置到硬件"
                                    Foreground="{DynamicResource PrimaryHueMidForegroundBrush}"
                                    Style="{DynamicResource MaterialDesignRaisedButton}" />
                            </StackPanel>
                        </materialDesign:Card>

                        <!--  配置表格  -->
                        <Grid Grid.Row="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="24" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <!--  DI反转配置  -->
                            <materialDesign:Card Grid.Column="0" Padding="16">
                                <StackPanel>
                                    <Grid Margin="0,0,0,12">
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            Style="{DynamicResource MaterialDesignSubtitle1TextBlock}"
                                            Text="数字输入 (DI) 反转" />
                                        <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                            <Button
                                                Command="{Binding SelectAllDIInverterCommand}"
                                                CommandParameter="{StaticResource True}"
                                                Content="全选"
                                                Style="{DynamicResource MaterialDesignFlatButton}" />
                                            <Button
                                                Margin="8,0,0,0"
                                                Command="{Binding SelectAllDIInverterCommand}"
                                                CommandParameter="{StaticResource False}"
                                                Content="全不选"
                                                Style="{DynamicResource MaterialDesignFlatButton}" />
                                        </StackPanel>
                                    </Grid>
                                    <DataGrid
                                        Height="400"
                                        materialDesign:DataGridAssist.CellPadding="8"
                                        materialDesign:DataGridAssist.ColumnHeaderPadding="8"
                                        AutoGenerateColumns="False"
                                        CanUserAddRows="False"
                                        ItemsSource="{Binding DIInverterConfigList}">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn
                                                Width="60"
                                                Binding="{Binding Index}"
                                                Header="索引"
                                                IsReadOnly="True" />
                                            <DataGridTemplateColumn Width="60" Header="反转">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <CheckBox HorizontalAlignment="Center" IsChecked="{Binding IsInverted, UpdateSourceTrigger=PropertyChanged}" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTextColumn
                                                Width="*"
                                                Binding="{Binding Description}"
                                                Header="描述"
                                                IsReadOnly="True" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </StackPanel>
                            </materialDesign:Card>

                            <!--  DO反转配置  -->
                            <materialDesign:Card Grid.Column="2" Padding="16">
                                <StackPanel>
                                    <Grid Margin="0,0,0,12">
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            Style="{DynamicResource MaterialDesignSubtitle1TextBlock}"
                                            Text="数字输出 (DO) 反转" />
                                        <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                            <Button
                                                Command="{Binding SelectAllDOInverterCommand}"
                                                CommandParameter="{StaticResource True}"
                                                Content="全选"
                                                Style="{DynamicResource MaterialDesignFlatButton}" />
                                            <Button
                                                Margin="8,0,0,0"
                                                Command="{Binding SelectAllDOInverterCommand}"
                                                CommandParameter="{StaticResource False}"
                                                Content="全不选"
                                                Style="{DynamicResource MaterialDesignFlatButton}" />
                                        </StackPanel>
                                    </Grid>
                                    <DataGrid
                                        Height="400"
                                        materialDesign:DataGridAssist.CellPadding="8"
                                        materialDesign:DataGridAssist.ColumnHeaderPadding="8"
                                        AutoGenerateColumns="False"
                                        CanUserAddRows="False"
                                        ItemsSource="{Binding DOInverterConfigList}">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn
                                                Width="60"
                                                Binding="{Binding Index}"
                                                Header="索引"
                                                IsReadOnly="True" />
                                            <DataGridTemplateColumn Width="60" Header="反转">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <CheckBox HorizontalAlignment="Center" IsChecked="{Binding IsInverted, UpdateSourceTrigger=PropertyChanged}" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTextColumn
                                                Width="*"
                                                Binding="{Binding Description}"
                                                Header="描述"
                                                IsReadOnly="True" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </StackPanel>
                            </materialDesign:Card>
                        </Grid>
                    </Grid>
                </TabItem>
            </TabControl>
        </Grid>
    </ScrollViewer>
</Page> 